<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Pantry - Your Kitchen Companion</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>üç≥ Smart Pantry</h1>
            <p class="subtitle">Manage your kitchen, plan your meals</p>
        </header>

        <nav class="main-nav">
            <button class="nav-btn active" data-section="ingredients">Ingredients</button>
            <button class="nav-btn" data-section="recipes">Recipes</button>
            <button class="nav-btn" data-section="shopping">Shopping List</button>
            <button class="nav-btn" data-section="meal-plan">Meal Plan</button>
            <button class="nav-btn" data-section="settings">Settings</button>
        </nav>

        <!-- Ingredients Section -->
        <section id="ingredients" class="section active">
            <h2>My Ingredients</h2>

            <div class="location-tabs">
                <button class="location-btn active" data-location="pantry">Pantry</button>
                <button class="location-btn" data-location="fridge">Fridge</button>
                <button class="location-btn" data-location="freezer">Freezer</button>
            </div>

            <div class="add-ingredient-form">
                <input type="text" id="ingredient-name" placeholder="Ingredient name" />
                <input type="number" id="ingredient-quantity" placeholder="Quantity" min="0.1" step="0.1" value="1" />
                <input type="text" id="ingredient-unit" placeholder="Unit (e.g., cups, lbs)" />
                <input type="date" id="ingredient-expiration" placeholder="Expiration (optional)" />
                <button id="add-ingredient-btn">Add Ingredient</button>
            </div>

            <div class="ingredient-lists">
                <div id="pantry-list" class="ingredient-list active">
                    <h3>Pantry Items</h3>
                    <ul id="pantry-items"></ul>
                </div>
                <div id="fridge-list" class="ingredient-list">
                    <h3>Fridge Items</h3>
                    <ul id="fridge-items"></ul>
                </div>
                <div id="freezer-list" class="ingredient-list">
                    <h3>Freezer Items</h3>
                    <ul id="freezer-items"></ul>
                </div>
            </div>
        </section>

        <!-- Recipes Section -->
        <section id="recipes" class="section">
            <h2>My Recipes</h2>

            <div class="recipe-search-container">
                <input type="text" id="recipe-search" placeholder="üîç Search recipes..." />
            </div>

            <div class="recipe-controls">
                <button id="add-recipe-btn">Add New Recipe</button>
                <div class="recipe-filters">
                    <button class="filter-btn active" data-filter="all">All Recipes</button>
                    <button class="filter-btn" data-filter="ready">Ready to Cook</button>
                    <button class="filter-btn" data-filter="missing">Need Ingredients</button>
                </div>
            </div>

            <div class="category-filter-container">
                <button class="category-filter-btn active" data-category="all">All</button>
                <button class="category-filter-btn" data-category="breakfast">Breakfast</button>
                <button class="category-filter-btn" data-category="lunch">Lunch</button>
                <button class="category-filter-btn" data-category="dinner">Dinner</button>
                <button class="category-filter-btn" data-category="dessert">Dessert</button>
                <button class="category-filter-btn" data-category="snack">Snack</button>
            </div>

            <!-- Add Recipe Form (Initially Hidden) -->
            <div id="add-recipe-form" class="modal hidden">
                <div class="modal-content">
                    <span class="close-modal">&times;</span>
                    <h3 id="recipe-modal-title">Add New Recipe</h3>
                    <input type="text" id="recipe-name" placeholder="Recipe name" />

                    <div style="display: flex; gap: 10px; margin-bottom: 15px;">
                        <div style="flex: 1;">
                            <label style="display: block; margin-bottom: 5px; font-weight: 600;">Servings:</label>
                            <input type="number" id="recipe-servings" placeholder="Servings" min="1" value="4" style="width: 100%;" />
                        </div>
                        <div style="flex: 1;">
                            <label style="display: block; margin-bottom: 5px; font-weight: 600;">Category:</label>
                            <select id="recipe-category" style="width: 100%; padding: 12px; border: 2px solid #e9ecef; border-radius: 8px;">
                                <option value="">Select category</option>
                                <option value="breakfast">Breakfast</option>
                                <option value="lunch">Lunch</option>
                                <option value="dinner">Dinner</option>
                                <option value="dessert">Dessert</option>
                                <option value="snack">Snack</option>
                            </select>
                        </div>
                    </div>

                    <input type="text" id="recipe-image" placeholder="Image URL (optional)" />
                    <textarea id="recipe-instructions" placeholder="Instructions (optional)" rows="4"></textarea>

                    <div class="recipe-ingredients-input">
                        <h4>Ingredients Required</h4>
                        <div id="recipe-ingredient-inputs">
                            <div class="recipe-ingredient-row">
                                <input type="text" class="recipe-ing-name" placeholder="Ingredient" />
                                <input type="number" class="recipe-ing-qty" placeholder="Qty" min="0.1" step="0.1" value="1" />
                                <input type="text" class="recipe-ing-unit" placeholder="Unit" />
                                <button type="button" class="remove-ing-btn">Remove</button>
                            </div>
                        </div>
                        <button type="button" id="add-recipe-ingredient-btn">+ Add Ingredient</button>
                    </div>

                    <button id="save-recipe-btn">Save Recipe</button>
                </div>
            </div>

            <!-- Edit Ingredient Modal -->
            <div id="edit-ingredient-modal" class="modal hidden">
                <div class="modal-content" style="max-width: 400px;">
                    <span class="close-edit-ingredient">&times;</span>
                    <h3>Edit Ingredient</h3>
                    <input type="text" id="edit-ing-name" placeholder="Ingredient name" />
                    <input type="number" id="edit-ing-quantity" placeholder="Quantity" min="0.1" step="0.1" />
                    <input type="text" id="edit-ing-unit" placeholder="Unit" />
                    <input type="date" id="edit-ing-expiration" placeholder="Expiration (optional)" />
                    <button id="save-ingredient-edit-btn">Save Changes</button>
                </div>
            </div>

            <div id="recipe-list" class="recipe-grid"></div>
        </section>

        <!-- Shopping List Section -->
        <section id="shopping" class="section">
            <h2>Shopping List</h2>

            <div class="shopping-actions">
                <button id="auto-generate-list-btn">Auto-Generate from Recipes</button>
                <button id="generate-from-meal-plan-btn" style="background: #9f7aea;">Generate from Meal Plan</button>
                <button id="clear-shopping-list-btn">Clear List</button>
            </div>

            <div class="add-shopping-item">
                <input type="text" id="shopping-item-name" placeholder="Item name" />
                <input type="number" id="shopping-item-qty" placeholder="Qty" min="0.1" step="0.1" value="1" />
                <input type="text" id="shopping-item-unit" placeholder="Unit" />
                <select id="shopping-item-category">
                    <option value="produce">Produce</option>
                    <option value="dairy">Dairy</option>
                    <option value="meat">Meat/Seafood</option>
                    <option value="pantry">Pantry</option>
                    <option value="frozen">Frozen</option>
                    <option value="bakery">Bakery</option>
                    <option value="other">Other</option>
                </select>
                <button id="add-shopping-item-btn">Add to List</button>
            </div>

            <div class="shopping-category-filter">
                <button class="shop-cat-btn active" data-shop-category="all">All Items</button>
                <button class="shop-cat-btn" data-shop-category="produce">Produce</button>
                <button class="shop-cat-btn" data-shop-category="dairy">Dairy</button>
                <button class="shop-cat-btn" data-shop-category="meat">Meat</button>
                <button class="shop-cat-btn" data-shop-category="pantry">Pantry</button>
                <button class="shop-cat-btn" data-shop-category="frozen">Frozen</button>
                <button class="shop-cat-btn" data-shop-category="bakery">Bakery</button>
            </div>

            <div id="shopping-list-by-category"></div>
        </section>

        <!-- Meal Plan Section -->
        <section id="meal-plan" class="section">
            <h2>Weekly Meal Plan</h2>

            <div id="meal-plan-grid" class="meal-plan-grid">
                <!-- Days will be generated dynamically -->
            </div>
        </section>

        <!-- Settings Section -->
        <section id="settings" class="section">
            <h2>Settings & Data Management</h2>

            <div class="settings-card">
                <h3>‚òÅÔ∏è Cloud Sync</h3>
                <p style="color: #6c757d; margin-bottom: 15px;">
                    Sync your data across all devices with a secure token. Your token works like a password - keep it safe!
                </p>

                <div id="logged-out-state" style="display: none;">
                    <button id="register-btn" style="background: #48bb78;">
                        üé´ Generate New Token
                    </button>
                    <div style="margin-top: 20px;">
                        <p style="color: #6c757d; margin-bottom: 10px;">Already have a token?</p>
                        <input type="text" id="login-token-input"
                               placeholder="Enter your token (e.g., KITCH-ABC123)"
                               style="width: 100%; margin-bottom: 10px; text-transform: uppercase;" />
                        <button id="login-btn" style="background: #667eea;">
                            üîê Login with Token
                        </button>
                    </div>
                </div>

                <div id="logged-in-state" style="display: none;">
                    <div style="background: #f0fff4; padding: 15px; border-radius: 8px;
                                border-left: 4px solid #48bb78; margin-bottom: 15px;">
                        <strong style="display: block; margin-bottom: 8px;">Your Sync Token:</strong>
                        <div style="display: flex; align-items: center; gap: 10px;">
                            <span id="display-token" style="color: #667eea; font-family: 'Courier New', monospace;
                                                           font-size: 1.2em; font-weight: 700;"></span>
                            <button onclick="copyToken()" style="padding: 6px 12px; font-size: 0.85em; background: #667eea;">
                                üìã Copy
                            </button>
                        </div>
                    </div>
                    <p style="color: #6c757d; font-size: 0.9em; margin-bottom: 15px;">
                        üí° Save this token to access your data from any device. Data syncs automatically when online.
                    </p>
                    <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                        <button id="sync-now-btn" style="background: #667eea;">
                            üîÑ Sync Now
                        </button>
                        <button id="logout-btn" style="background: #e53e3e;">
                            üö™ Logout
                        </button>
                    </div>
                    <div id="sync-status" style="margin-top: 10px; padding: 10px; background: #f8f9fa;
                                                  border-radius: 6px; font-size: 0.9em; color: #6c757d;">
                        Last synced: Never
                    </div>
                </div>
            </div>

            <div class="settings-card">
                <h3>üíæ Data Backup & Restore</h3>
                <p style="color: #6c757d; margin-bottom: 15px;">Export your data for backup or import from a previous backup.</p>
                <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                    <button id="export-data-btn" style="background: #48bb78;">Export All Data</button>
                    <label for="import-data-file" style="cursor: pointer; display: inline-block;">
                        <button type="button" id="import-trigger-btn" style="background: #667eea;">Import Data</button>
                        <input type="file" id="import-data-file" accept=".json" style="display: none;" />
                    </label>
                    <button id="clear-all-data-btn" style="background: #e53e3e;">Clear All Data</button>
                </div>
            </div>

            <div class="settings-card">
                <h3>Statistics</h3>
                <div id="stats-display" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-top: 15px;">
                    <!-- Stats will be populated here -->
                </div>
            </div>

            <div class="settings-card">
                <h3>About Smart Pantry</h3>
                <p style="color: #6c757d;">Version 2.0</p>
                <p style="color: #6c757d; margin-top: 10px;">Your complete kitchen management solution. Track ingredients, plan meals, generate shopping lists, and more!</p>
            </div>
        </section>
    </div>

    <script src="app.js"></script>
</body>
</html>
